{% extends "base.html" %}

{% if business_item %}
    {% block title %}{{business_item.name}}{% endblock %}
    
    {% block page_name %}{{business_item.name}}{% endblock %}

    {% block content %}
    
    <div class="span-9" id="business_props">
            <h2>Address</h2>
            <ul class="boxed_list">
                <li>{{business_item.address1}}<br/>
                    {{ business_item.address2 }}<br/>
                    {{ business_item.city }}, {{ business_item.province }}, {{ business_item.country }}<br/>
                    {{ business_item.zipcode }}<br/>
                </li>
            </ul>
            <h2>Contact Number</h2>
            <ul class="boxed_list">
            {% for phone in phone_list %}
                <li>{{phone.phone_number}}</li>
            {% endfor %}
            </ul>
    </div>
    
    <div class="span-8 ">
        <div id="mapsearch">Loading</div>
        <script type="text/javascript">
        $(document).ready(function(){ 
        
        var hotspotsList = [
            { element : document.getElementById("hs01"), query : "Bo's Coffee Shop" },
            { element : document.getElementById("hs02"), query : "Starbucks" },
            { element : document.getElementById("hs03"), query : "WIFI" },
            { element : document.getElementById("hs04"), query : "Massage" },
            { element : document.getElementById("hs05"), query : "Fastfood" },
            { element : document.getElementById("hs06"), query : "Pizza" },
            { element : document.getElementById("hs07"), query : "Badminton" }
        ];    
            
        function LoadMapSearch() {
            var options = {
            title : "{{business_item.name|safe}}",
            hotspots : hotspotsList,
            zoomControl : GSmapSearchControl.ZOOM_CONTROL_ENABLE_ALL,
            activeMapZoom : GSmapSearchControl.ACTIVE_MAP_ZOOM,
            idleMapZoom  : GSmapSearchControl.ACTIVE_MAP_ZOOM
        }
        
        new GSmapSearchControl(
                document.getElementById("mapsearch"),
                "{{string_location|safe}}",
                options
            );
        }
        GSearch.setOnLoadCallback(LoadMapSearch);
        });
        </script>
    </div>
    
    <div class="span-7 last" id="business_props">
        <h2 style="color: #DF0101">Recommendations</h2>
        <ul class="boxed_list">
            <li id="hs01" class="hotspot">Bo's Coffee Shop</li>
            <li id="hs02" class="hotspot">Starbucks</li>
            <li id="hs03" class="hotspot">WIFI</li>
            <li id="hs04" class="hotspot">Massage</li>
            <li id="hs05" class="hotspot">Fastfood</li>
            <li id="hs06" class="hotspot">Pizza</li>
            <li id="hs07" class="hotspot">Badminton</li>
        </ul>
        *Need to add search results after clicking recommendations.
    </div>
    
    <div class="span-24 last">

        <div class="buttons">
            <a href="/review/add/{{business_item.id}}" class="button"><img src="/images/icons/add.png" alt=""/> <span>Add Review</span></a> 
            <a href="/review/add/{{business_item.id}}" class="button"><img src="/images/icons/image_add.png" alt=""/> <span>Add Photos</span></a> 
        </div>
    </div>
    
    <div class="span-24 last" id="business_props">
        <h2>Reviews</h2>
        <ul class="boxed_list">
        {% for review in reviews %}
		<li>"{{review.review}}" by: {{review.user.first_name}} {{review.user.last_name}} on {{review.created_at}}</li>
        {% endfor %}
        </ul>
    </div>
    {% endblock %}
{% else %}
    No business available.
{% endif %} 
